Version 4
SHEET 1 3352 1188
WIRE 0 32 -144 32
WIRE 496 32 336 32
WIRE 704 32 576 32
WIRE 0 64 0 32
WIRE 0 192 0 144
WIRE 336 208 336 32
WIRE 480 208 336 208
WIRE 688 208 560 208
WIRE 0 304 -144 304
WIRE 0 336 0 304
WIRE 336 368 336 208
WIRE 480 368 336 368
WIRE 688 368 560 368
WIRE 0 464 0 416
WIRE 336 512 336 368
WIRE 688 512 336 512
WIRE 544 720 400 720
WIRE 800 720 544 720
WIRE 1360 736 1216 736
WIRE 1488 736 1360 736
WIRE 1984 736 1840 736
WIRE 2112 736 1984 736
WIRE 1664 752 1552 752
WIRE 2288 752 2176 752
WIRE 400 768 400 720
WIRE 800 768 800 720
WIRE 1488 768 1456 768
WIRE 2112 768 2080 768
WIRE 1216 784 1216 736
WIRE 1840 784 1840 736
WIRE 1456 800 1456 768
WIRE 2080 800 2080 768
WIRE 400 880 400 848
WIRE 800 880 800 848
WIRE 1216 896 1216 864
WIRE 1840 896 1840 864
WIRE 1360 1008 1216 1008
WIRE 1488 1008 1360 1008
WIRE 1664 1024 1552 1024
WIRE 1488 1040 1456 1040
WIRE 1216 1056 1216 1008
WIRE 1456 1072 1456 1040
WIRE 1216 1168 1216 1136
FLAG 0 192 0
FLAG -144 32 thetat
IOPIN -144 32 In
FLAG 0 464 0
FLAG -144 304 amp
IOPIN -144 304 In
FLAG 704 32 a
IOPIN 704 32 Out
FLAG 688 208 a
IOPIN 688 208 Out
FLAG 688 368 a
IOPIN 688 368 Out
FLAG 688 512 N
IOPIN 688 512 Out
FLAG 800 880 0
FLAG 400 880 0
FLAG 544 720 theta
FLAG 1216 896 0
FLAG 1360 736 bc
FLAG 1456 800 0
FLAG 1664 752 ha
IOPIN 1664 752 Out
FLAG 1216 1168 0
FLAG 1360 1008 ca
FLAG 1456 1072 0
FLAG 1664 1024 hc
IOPIN 1664 1024 Out
FLAG 1840 896 0
FLAG 1984 736 ab
FLAG 2080 800 0
FLAG 2288 752 hb
IOPIN 2288 752 Out
SYMBOL res -16 48 R0
SYMATTR InstName Rin1
SYMATTR Value 10Meg
SYMBOL res -16 320 R0
SYMATTR InstName Rin2
SYMATTR Value 10Meg
SYMBOL bv 592 32 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 38 -1316 VTop 2
SYMATTR InstName Ea
SYMATTR Value value= {if(V(theta)<pi/6, V(amp)*V(theta)/(pi/6),if(V(theta)<5*pi/6, V(amp), if(V(theta)<7*pi/6, V(amp)-V(amp)*(V(theta)-5*pi/6)/(pi/6), if( V(theta)<11*pi/6, -V(amp), if(V(theta)<2*pi, -V(amp) + V(amp)*(V(theta)-11*pi/6)/(pi/6),0) ) ) ) )}
SYMBOL bv 576 208 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 36 -1238 VTop 2
SYMATTR InstName Eb
SYMATTR Value value={if(V(theta)<pi/2, -V(amp), if( V(theta)< 5*pi/6, -V(amp)+V(amp)*(V(theta)-3*pi/6)/(pi/6), if( V(theta)<9*pi/6, V(amp), if(V(theta)<11*pi/6, V(amp)-V(amp)*(V(theta)-9*pi/6)/(pi/6), if( V(theta)<2*pi, -V(amp), 0 ) ) ) ) )}
SYMBOL bv 576 368 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 35 -1199 VTop 2
SYMATTR InstName Ec
SYMATTR Value value={if(V(theta)<pi/6, V(amp), if( V(theta)<3*pi/6, V(amp)-V(amp)*(V(theta)-pi/6)/(pi/6), if(V(theta)<7*pi/6, -V(amp), if(V(theta)<9*pi/6, -V(amp)+V(amp)*(V(theta)-7*pi/6)/(pi/6), if( V(theta)<2*pi, V(amp), 0 ) ) ) ) ) }
SYMBOL bv 400 752 R0
WINDOW 3 -52 187 Left 2
SYMATTR Value value={(V(thetat)/(2*pi) . floor( V(thetat)/(2*pi))*2*pi}
SYMATTR InstName E1
SYMBOL res 784 752 R0
SYMATTR InstName Rin4
SYMATTR Value 10Meg
SYMBOL Control\\comp 1520 752 R0
WINDOW 3 -8 37 Left 2
WINDOW 123 -8 60 Left 2
SYMATTR Value Vhigh=5
SYMATTR Value2 Vlow=0
SYMATTR InstName Uha
SYMBOL bv 1216 768 R0
WINDOW 3 27 99 Left 2
SYMATTR Value value={V(b)-V(c)}
SYMATTR InstName Ebc
SYMBOL Control\\comp 1520 1024 R0
WINDOW 3 -8 37 Left 2
WINDOW 123 -8 60 Left 2
SYMATTR Value Vhigh=5
SYMATTR Value2 Vlow=0
SYMATTR InstName Uhc
SYMBOL bv 1216 1040 R0
WINDOW 3 27 99 Left 2
SYMATTR Value value={V(c)-V(a)}
SYMATTR InstName Eca
SYMBOL Control\\comp 2144 752 R0
WINDOW 3 -8 37 Left 2
WINDOW 123 -8 60 Left 2
SYMATTR Value Vhigh=5
SYMATTR Value2 Vlow=0
SYMATTR InstName Uhb
SYMBOL bv 1840 768 R0
WINDOW 3 27 99 Left 2
SYMATTR Value value={V(a)-V(b)}
SYMATTR InstName Eab
